_LED	DATA 02Fh

_WSK1	DATA	030h
_WSK2	DATA	031h
_WSK3	DATA	032h
_WSK4	DATA	033h
_WSK5	DATA	034h
_WSK6	DATA	035h

_WSK_INDEKS	DATA	036h

_CSDS	EQU 0FF30h
_CSDB	EQU 0FF38h		


	ORG 0000h
_RESET:
	LJMP _INIT


	ORG 0100h
_INIT:
	CALL _7SEG_INIT
	CALL _7SEG_REF
	



_LOOP:
	NOP
	CALL _7SEG_REF
	LJMP	_LOOP

_7SEG_REF:
	SETB P1.6

	MOV A,#10000000b
	MOV R7,_WSK_INDEKS

_INDEKSUJ:
	DJNZ R7,_INDEKSUJ_CD
	JMP _INDEKSUJ_END

_INDEKSUJ_CD:
	RL A
	JMP _INDEKSUJ
_INDEKSUJ_END:

	MOV DPTR,#_CSDS
	MOVX	@DPTR,A

	MOV A,#_LED
	ADD A,_WSK_INDEKS
	DEC A

	MOV R0,A
	
	MOV A,@R0
	MOV DPTR, #_CSDB
	MOVX @DPTR,A


	CLR P1.6

	DJNZ _WSK_INDEKS,_7SEG_REF_END
	MOV _WSK_INDEKS,#7d

_7SEG_REF_END:
	RET

_7SEG_INIT:
	SETB P1.6
	
	MOV _WSK_INDEKS,#7d

	MOV _LED, #00010000b
	MOV _WSK1,#00000110b
	MOV _WSK2,#01011011b
	MOV _WSK3,#01001111b
	MOV _WSK4,#01100110b
	MOV _WSK5,#01101101b
	MOV _WSK6,#01111101b

	;MOV A,#00000001b
	;MOV DPTR,#_CSDS
	;MOVX	@DPTR,A

	CLR P1.6

	RET


END