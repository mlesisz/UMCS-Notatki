_LCDWC	DATA 	0FF80h
_LCDWD	DATA	0FF81h
_LCDRC	DATA	0FF82h
_LCDRD	DATA	0FF83h

	
	ORG 0000h
_RESET:
	LJMP _INIT

	ORG 0100h
_INIT:
	;CALL _LCD_INIT
	CALL _NAPISZ_LED

_LOOP:
	NOP
	
	LJMP	_LOOP

_MENU_OBSLUGA:

	RET

_NAPISZ_MSG:
	MOV DPTR,#_MSG_NAPIS
	CALL _NAPISZ_WHILE
	RET

_NAPISZ_SETTINGS:
	MOV DPTR,#_SETTINGS_NAPIS
	CALL _NAPISZ_WHILE
	RET

_NAPISZ_TEST:
	MOV DPTR,#_TEST_NAPIS
	CALL _NAPISZ_WHILE
	RET

_NAPISZ_SEND:
	MOV DPTR,#_SEND_NAPIS
	CALL _NAPISZ_WHILE
	RET

_NAPISZ_READ:
	MOV DPTR,#_READ_NAPIS
	CALL _NAPISZ_WHILE
	RET

_NAPISZ__UPTIME:
	MOV DPTR,#_UPTIME_NAPIS
	CALL _NAPISZ_WHILE
	RET

_NAPISZ_MAIN_MENU:
	MOV DPTR,#_MAIN_MENU_NAPIS
	CALL _NAPISZ_WHILE
	RET

_NAPISZ_EDIT_MSG:
	MOV DPTR,#_EDIT_MSG_NAPIS
	CALL _NAPISZ_WHILE
	RET

_NAPISZ_BUZZER:
	MOV DPTR,#_BUZZER_NAPIS
	CALL _NAPISZ_WHILE
	RET

_NAPISZ_LED:
	MOV DPTR,#_LED_NAPIS
	CALL _NAPISZ_WHILE
	RET

_NAPISZ_WHILE:
	CLR A
	MOVC A,@A+DPTR
	MOV R7,A
	JZ _NAPISZ_END
	CALL _LCD_DATA_FROM_R7
	INC DPTR
	SJMP _NAPISZ_WHILE
_NAPISZ_END:
	RET

_LCD_CZYSC:
	MOV R7,#1
	CALL _LCD_CMD_FROM_R7
	RET

_LCD_INIT:
	; podpunkt 1
	MOV R7,#00111000b
	CALL _LCD_CMD_FROM_R7
	; podpunkt 2
	MOV R7,#00001111b
	CALL _LCD_CMD_FROM_R7
	; podpunkt 3
	MOV R7,#00000111b
	CALL _LCD_CMD_FROM_R7
	MOV R7,#00011000b
	CALL _LCD_CMD_FROM_R7
	; podpunkt 4
	MOV R7,#00000001b
	CALL _LCD_CMD_FROM_R7
	RET
	
_LCD_WAIT_WHILE_BUSY:
	MOV R1,#_LCDRC
	MOVX A,@R1
	JB ACC.7, _LCD_WAIT_WHILE_BUSY
_LCD_WAIT_WHILE_BUSY_END:
	RET
	
_LCD_CMD_FROM_R7:
	CALL _LCD_WAIT_WHILE_BUSY
	MOV R0,#_LCDWC
	MOV A,R7
	MOVX @R0,A
	RET

_LCD_DATA_FROM_R7:
	CALL _LCD_WAIT_WHILE_BUSY
	MOV R1,#_LCDWD
	MOV A, R7
	MOVX @R1,A
	RET
	
_MAIN_MENU_NAPIS:
	DB	'MAIN MENU',0
_MSG_NAPIS:
	DB	'MSG',0
_SETTINGS_NAPIS:
	DB	'SETTINGS',0
_TEST_NAPIS:
	DB	'TEST',0
_SEND_NAPIS:
	DB	'SEND',0
_READ_NAPIS:
	DB	'READ',0
_UPTIME_NAPIS:
	DB	'UPTIME',0
_EDIT_MSG_NAPIS:
	DB	'EDIT_MSG',0
_BUZZER_NAPIS:
	DB	'BUZZER',0
_LED_NAPIS:
	DB	'LED',0

END